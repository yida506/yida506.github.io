{
    "version": "https://jsonfeed.org/version/1",
    "title": "菜b的爬虫记录 • All posts by \"app\" category",
    "description": "",
    "home_page_url": "http://yida506.github.io",
    "items": [
        {
            "id": "http://yida506.github.io/2022/08/28/dy-app/",
            "url": "http://yida506.github.io/2022/08/28/dy-app/",
            "title": "dy_app",
            "date_published": "2022-08-28T13:37:31.000Z",
            "content_html": "<h4 id=\"抖音app\"><a class=\"anchor\" href=\"#抖音app\">#</a> 抖音 app</h4>\n<h5 id=\"抓包\"><a class=\"anchor\" href=\"#抓包\">#</a> 抓包</h5>\n<p>​\t\t抖音 app 采取了 quic 的协议，常规的方法无法抓到包，本质上是使用了开源的 boringssl，走了一个叫 quic 的协议，直接 hook 掉 so 里面的内容，即可。</p>\n<h5 id=\"接口分析\"><a class=\"anchor\" href=\"#接口分析\">#</a> 接口分析</h5>\n<p>​\t\t这里抓取的是搜索接口</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>url <span class=\"token operator\">=</span> <span class=\"token string\">\"https://search100-search-quic-lf.amemv.com/aweme/v1/general/search/stream/\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>params <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">\"iid\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1368207845240094\"</span><span class=\"token punctuation\">,</span>   <span class=\"token operator\">//</span> 设备相关？</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">\"device_id\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"893218821787319\"</span><span class=\"token punctuation\">,</span>  <span class=\"token operator\">//</span> 设备<span class=\"token builtin\">id</span> 这个应该是唯一的</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token string\">\"ac\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"wifi\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">\"channel\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"sem_shenma_dy_ls088\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token string\">\"aid\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1128\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">\"app_name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"aweme\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token string\">\"version_code\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"190800\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token string\">\"version_name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"19.8.0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token string\">\"device_platform\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"android\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token string\">\"os\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"android\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token string\">\"ssmix\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token string\">\"device_type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Pixel 2 XL\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token string\">\"device_brand\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"google\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token string\">\"language\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"zh\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token string\">\"os_api\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"29\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token string\">\"os_version\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"10\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token string\">\"openudid\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1de8bb03f51c66e1\"</span><span class=\"token punctuation\">,</span>   <span class=\"token operator\">//</span> 设备相关？</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token string\">\"manifest_version_code\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"190801\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token string\">\"resolution\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1440*2712\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token string\">\"dpi\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"560\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token string\">\"update_version_code\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"19809900\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token string\">\"_rticket\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1661693429375\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token string\">\"package\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"com.ss.android.ugc.aweme\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token string\">\"cpu_support64\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token string\">\"host_abi\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"armeabi-v7a\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token string\">\"is_guest_mode\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token string\">\"app_type\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"normal\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token string\">\"minor_status\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token string\">\"appTheme\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"light\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token string\">\"need_personal_recommend\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token string\">\"is_android_pad\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token string\">\"ts\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1661693459\"</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token string\">\"cdid\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"d92a35dd-1a8d-4a23-bb33-2b4cbce670c9\"</span>  <span class=\"token operator\">//</span> 设备相关？</pre></td></tr><tr><td data-num=\"36\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><blockquote>\n<p>其中看到了貌似跟设备相关的信息，暂时还啥都不知道</p>\n</blockquote>\n<h5 id=\"设备注册\"><a class=\"anchor\" href=\"#设备注册\">#</a> 设备注册</h5>\n<p>​\t\t抓包拿到设备注册的接口</p>\n<p>​\t\t<img data-src=\"dy-app/image-20220829110628014.png\" alt=\"image-20220829110628014\"></p>\n",
            "tags": []
        }
    ]
}